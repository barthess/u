#include "math.h"

#include "uav.h"
#include "matrix.h"

/*
 ******************************************************************************
 * DEFINES
 ******************************************************************************
 */

/*
 ******************************************************************************
 * EXTERNS
 ******************************************************************************
 */

/*
 ******************************************************************************
 * PROTOTYPES
 ******************************************************************************
 */

/*
 ******************************************************************************
 * GLOBAL VARIABLES
 ******************************************************************************
 */
static TimeMeasurement tmup;
static volatile uint32_t result;
static float m1[15*15];
static float m2[15*15];
static float res[15*15];

/*
 ******************************************************************************
 ******************************************************************************
 * LOCAL FUNCTIONS
 ******************************************************************************
 ******************************************************************************
 */

/*
 ******************************************************************************
 * EXPORTED FUNCTIONS
 ******************************************************************************
 */
float benchmark_start(void){

  uint32_t i = 0;
  for (i=0; i<225; i++){
    m1[i] = 0;
    m2[i] = 0;
  }
  tmObjectInit(&tmup);
  tmStartMeasurement(&tmup);
  matrix_multiply(15, 15, 15, m1, m2, res);
  tmStopMeasurement(&tmup);

  result = tmup.last;
  return res[113];
}


